<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Singlton pattern | 油腻中年大叔</title>
    <meta name="description" content="你想要的这里都没有，你不想要的这里都有">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    
    <link rel="preload" href="/assets/css/styles.ded2f491.css" as="style"><link rel="preload" href="/assets/js/app.ded2f491.js" as="script"><link rel="preload" href="/assets/js/5.2e2f809b.js" as="script"><link rel="prefetch" href="/assets/js/0.eb7108e7.js"><link rel="prefetch" href="/assets/js/1.d8ec4d72.js"><link rel="prefetch" href="/assets/js/2.28f90b8d.js"><link rel="prefetch" href="/assets/js/3.6001361f.js"><link rel="prefetch" href="/assets/js/4.80c27a58.js"><link rel="prefetch" href="/assets/js/6.0d0d8441.js"><link rel="prefetch" href="/assets/js/7.8e4037c3.js"><link rel="prefetch" href="/assets/js/8.5752a787.js"><link rel="prefetch" href="/assets/js/9.8329deb8.js"><link rel="prefetch" href="/assets/js/10.4843c5ba.js"><link rel="prefetch" href="/assets/js/11.9e8b7549.js"><link rel="prefetch" href="/assets/js/12.02c0fa30.js"><link rel="prefetch" href="/assets/js/13.f5d738e8.js"><link rel="prefetch" href="/assets/js/14.24f8e576.js"><link rel="prefetch" href="/assets/js/15.e752518b.js"><link rel="prefetch" href="/assets/js/16.d74da356.js"><link rel="prefetch" href="/assets/js/17.5759e4d8.js"><link rel="prefetch" href="/assets/js/18.4e466a14.js"><link rel="prefetch" href="/assets/js/19.60a2d73f.js"><link rel="prefetch" href="/assets/js/20.c9a0e62d.js"><link rel="prefetch" href="/assets/js/21.40026d70.js"><link rel="prefetch" href="/assets/js/22.c5b0ef8a.js"><link rel="prefetch" href="/assets/js/23.6f254965.js"><link rel="prefetch" href="/assets/js/24.fcf66f98.js"><link rel="prefetch" href="/assets/js/25.76bed4da.js"><link rel="prefetch" href="/assets/js/26.a29ecb98.js"><link rel="prefetch" href="/assets/js/27.19c14279.js"><link rel="prefetch" href="/assets/js/28.da0a820a.js"><link rel="prefetch" href="/assets/js/29.ac0b92bb.js"><link rel="prefetch" href="/assets/js/30.2f36adb4.js"><link rel="prefetch" href="/assets/js/31.3b64636b.js"><link rel="prefetch" href="/assets/js/32.ab10440c.js"><link rel="prefetch" href="/assets/js/33.68e3f3f0.js"><link rel="prefetch" href="/assets/js/34.3996b8a2.js"><link rel="prefetch" href="/assets/js/35.6b7df171.js"><link rel="prefetch" href="/assets/js/36.01c663d5.js"><link rel="prefetch" href="/assets/js/37.24b862f7.js"><link rel="prefetch" href="/assets/js/38.27c698de.js"><link rel="prefetch" href="/assets/js/39.39eda98a.js"><link rel="prefetch" href="/assets/js/40.0d3a27e1.js"><link rel="prefetch" href="/assets/js/41.36133d84.js"><link rel="prefetch" href="/assets/js/42.4f708108.js"><link rel="prefetch" href="/assets/js/43.286ed069.js"><link rel="prefetch" href="/assets/js/44.69931ba8.js"><link rel="prefetch" href="/assets/js/45.9b6a53af.js"><link rel="prefetch" href="/assets/js/46.44e01f27.js"><link rel="prefetch" href="/assets/js/47.86ea0068.js"><link rel="prefetch" href="/assets/js/48.6d6e8398.js"><link rel="prefetch" href="/assets/js/49.eb3a0c16.js"><link rel="prefetch" href="/assets/js/50.5b9dbd38.js"><link rel="prefetch" href="/assets/js/51.e16cec94.js"><link rel="prefetch" href="/assets/js/52.08a38998.js"><link rel="prefetch" href="/assets/js/53.eab809f5.js"><link rel="prefetch" href="/assets/js/54.d13dbba6.js"><link rel="prefetch" href="/assets/js/55.6808ce92.js"><link rel="prefetch" href="/assets/js/56.096d270b.js"><link rel="prefetch" href="/assets/js/57.e4249cdf.js"><link rel="prefetch" href="/assets/js/58.c8669079.js"><link rel="prefetch" href="/assets/js/59.ad4f9d5d.js"><link rel="prefetch" href="/assets/js/60.1fb42366.js"><link rel="prefetch" href="/assets/js/61.cabe5660.js"><link rel="prefetch" href="/assets/js/62.fa1a1298.js"><link rel="prefetch" href="/assets/js/63.45ab79de.js"><link rel="prefetch" href="/assets/js/64.1b1f9f0e.js"><link rel="prefetch" href="/assets/js/65.8ec5686f.js"><link rel="prefetch" href="/assets/js/66.c678baef.js"><link rel="prefetch" href="/assets/js/67.19e5c964.js"><link rel="prefetch" href="/assets/js/68.1ed9f179.js"><link rel="prefetch" href="/assets/js/69.c24b07f2.js"><link rel="prefetch" href="/assets/js/70.0d51bff2.js"><link rel="prefetch" href="/assets/js/71.c4b4b293.js"><link rel="prefetch" href="/assets/js/72.14906a78.js"><link rel="prefetch" href="/assets/js/73.63ff0ad9.js"><link rel="prefetch" href="/assets/js/74.b9adca9b.js"><link rel="prefetch" href="/assets/js/75.545e5298.js"><link rel="prefetch" href="/assets/js/76.a0b47a49.js"><link rel="prefetch" href="/assets/js/77.7e27edab.js"><link rel="prefetch" href="/assets/js/78.1142e5fa.js"><link rel="prefetch" href="/assets/js/79.7c5cfce2.js"><link rel="prefetch" href="/assets/js/80.fc2c556d.js"><link rel="prefetch" href="/assets/js/81.8879b553.js"><link rel="prefetch" href="/assets/js/82.eacf1768.js"><link rel="prefetch" href="/assets/js/83.e45b0c21.js"><link rel="prefetch" href="/assets/js/84.1a4d1083.js"><link rel="prefetch" href="/assets/js/85.03758b26.js"><link rel="prefetch" href="/assets/js/86.ee483071.js"><link rel="prefetch" href="/assets/js/87.7b7f9f7e.js"><link rel="prefetch" href="/assets/js/88.ac9c1638.js"><link rel="prefetch" href="/assets/js/89.eb052447.js"><link rel="prefetch" href="/assets/js/90.422140a0.js"><link rel="prefetch" href="/assets/js/91.1590a6f8.js"><link rel="prefetch" href="/assets/js/92.96889e30.js"><link rel="prefetch" href="/assets/js/93.781dc372.js"><link rel="prefetch" href="/assets/js/94.67dfc4fd.js"><link rel="prefetch" href="/assets/js/95.2ec84126.js"><link rel="prefetch" href="/assets/js/96.9c8d4164.js"><link rel="prefetch" href="/assets/js/97.8e9b31ed.js"><link rel="prefetch" href="/assets/js/98.9842e1fc.js"><link rel="prefetch" href="/assets/js/99.393bed11.js"><link rel="prefetch" href="/assets/js/100.cce59a63.js"><link rel="prefetch" href="/assets/js/101.a716746b.js"><link rel="prefetch" href="/assets/js/102.8c93513c.js"><link rel="prefetch" href="/assets/js/103.d3a45484.js"><link rel="prefetch" href="/assets/js/104.ce471cd5.js"><link rel="prefetch" href="/assets/js/105.333da2a2.js"><link rel="prefetch" href="/assets/css/106.styles.2ca1612a.css"><link rel="prefetch" href="/assets/js/106.2ca1612a.js"><link rel="prefetch" href="/assets/css/107.styles.da40c964.css"><link rel="prefetch" href="/assets/js/107.da40c964.js">
    <link rel="stylesheet" href="/assets/css/106.styles.2ca1612a.css"><link rel="stylesheet" href="/assets/css/107.styles.da40c964.css"><link rel="stylesheet" href="/assets/css/styles.ded2f491.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">油腻中年大叔</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dart/" class="nav-link">Dart</a></div><div class="nav-item"><a href="/spring/" class="nav-link router-link-active">spring</a></div><div class="nav-item"><a href="/drools/" class="nav-link">规则和业务流程</a></div><div class="nav-item"><a href="/eip/" class="nav-link">EIP集成工具</a></div><div class="nav-item"><a href="/other/" class="nav-link">杂项</a></div><div class="nav-item"><a href="/algorithms/" class="nav-link">算法</a></div><div class="nav-item"><a href="/riding/" class="nav-link">骑行</a></div><div class="nav-item"><a href="/ev3/" class="nav-link">LEGO EV3 </a></div><div class="nav-item"><a href="/mb/" class="nav-link">Micro:bit </a></div><div class="nav-item"><a href="/math/" class="nav-link">小学数学 </a></div><div class="nav-item"><a href="/eng/" class="nav-link">小学英语 </a></div><div class="nav-item"><a href="/jp/" class="nav-link">日语 </a></div><div class="nav-item"><a href="/gs1/" class="nav-link">GS-1</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dart/" class="nav-link">Dart</a></div><div class="nav-item"><a href="/spring/" class="nav-link router-link-active">spring</a></div><div class="nav-item"><a href="/drools/" class="nav-link">规则和业务流程</a></div><div class="nav-item"><a href="/eip/" class="nav-link">EIP集成工具</a></div><div class="nav-item"><a href="/other/" class="nav-link">杂项</a></div><div class="nav-item"><a href="/algorithms/" class="nav-link">算法</a></div><div class="nav-item"><a href="/riding/" class="nav-link">骑行</a></div><div class="nav-item"><a href="/ev3/" class="nav-link">LEGO EV3 </a></div><div class="nav-item"><a href="/mb/" class="nav-link">Micro:bit </a></div><div class="nav-item"><a href="/math/" class="nav-link">小学数学 </a></div><div class="nav-item"><a href="/eng/" class="nav-link">小学英语 </a></div><div class="nav-item"><a href="/jp/" class="nav-link">日语 </a></div><div class="nav-item"><a href="/gs1/" class="nav-link">GS-1</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/spring/writetofile.html" class="sidebar-link">JavaIO-DataoutPut</a></li><li><a href="/spring/java-classloader.html" class="sidebar-link">java类加载器</a></li><li><a href="/spring/jvm-stack.html" class="sidebar-link">jvm 相关</a></li><li><a href="/spring/annotation.html" class="sidebar-link">注解的使用</a></li><li><a href="/spring/SpringAnnotations.html" class="sidebar-link">Spring注解速查</a></li><li><a href="/spring/springboot.html" class="sidebar-link">Springboot 配置速查</a></li><li><a href="/spring/springbootRun.html" class="sidebar-link">Springboot启动过程</a></li><li><a href="/spring/springboot-gitlab-ci.html" class="sidebar-link">Springboot基于Gitlab持续集成</a></li><li><a href="/spring/SpringBootTesting.html" class="sidebar-link">SpringBoot 测试</a></li><li><a href="/spring/TestingControllersInSpringboot.html" class="sidebar-link">SpringBoot的Contoller测试</a></li><li><a href="/spring/JacksonObjectMapperCheetSheet.html" class="sidebar-link">Jackson ObjectMapper CheetSheet</a></li><li><a href="/spring/lock.html" class="sidebar-link">占用bug分析</a></li><li><a href="/spring/singleton-scope.html" class="sidebar-link">Spring MVC 并发与线程安全</a></li><li><a href="/spring/singleton.html" class="active sidebar-link">设计模式-单件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring/singleton.html#singlton-pattern" class="sidebar-link">Singlton pattern</a></li><li class="sidebar-sub-header"><a href="/spring/singleton.html#examples" class="sidebar-link">Examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring/singleton.html#eager-initialization" class="sidebar-link">Eager initialization:</a></li><li class="sidebar-sub-header"><a href="/spring/singleton.html#using-static-block" class="sidebar-link">Using static block</a></li><li class="sidebar-sub-header"><a href="/spring/singleton.html#lazy-initialization" class="sidebar-link">Lazy initialization</a></li><li class="sidebar-sub-header"><a href="/spring/singleton.html#thread-safe-singleton" class="sidebar-link">Thread Safe Singleton:</a></li><li class="sidebar-sub-header"><a href="/spring/singleton.html#lazy-initialization-with-double-check-locking" class="sidebar-link">Lazy initialization with Double check locking:</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring/singleton.html#bill-pugh-singleton-implementation" class="sidebar-link">Bill Pugh Singleton Implementation:</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring/singleton.html#when-to-use-what" class="sidebar-link">When to use What</a></li></ul></li></ul></li></ul> </div> <div class="page"> <div class="content"><h2 id="singlton-pattern"><a href="#singlton-pattern" aria-hidden="true" class="header-anchor">#</a> Singlton pattern</h2> <p>An implementation of singleton class should have following properties:</p> <p>It should have only one instance :</p> <ul><li><strong>It should have only one instance</strong>: This is done by providing instance of class from within the class. Outer classes or subclasses should be prevented to create the instance. This is done by making the constructor private in java so that no class can access the constructor and hence cannot instantiate it.</li> <li><strong>Instance should be globally accessible</strong> : Instance of singleton class should be globally accessible so that each class can use it. In java it is done by making the access-specifier of instance public.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">//A singleton class should have public visiblity </span>
<span class="token comment">//so that complete application can use </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span> <span class="token punctuation">{</span> 
    
  <span class="token comment">//static instance of class globally accessible </span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> GFG instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor so that class </span>
    <span class="token comment">//cannot be instantiated from outside </span>
    <span class="token comment">//this class </span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Singleton class can be instantiated by two methods:</p> <ul><li><p><strong>Early initialization</strong> : In this method, class is initialized whether it is to be used or not. Main advantage of this method is its simplicity. You initiate the class at the time of class loading. Its drawback is that class is always initialized whether it is being used or not.</p></li> <li><p><strong>Lazy initialization</strong> : In this method, class in initialized only when it is required. It can save you from instantiating the class when you don’t need it. Generally lazy initialization is used when we create a singleton class.</p></li></ul> <h2 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">#</a> Examples</h2> <h3 id="eager-initialization"><a href="#eager-initialization" aria-hidden="true" class="header-anchor">#</a> Eager initialization:</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Java code to create singleton class by  </span>
<span class="token comment">// Eager Initialization </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span>  
<span class="token punctuation">{</span> 
  <span class="token comment">// public instance initialized when loading the class </span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> GFG instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor </span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Pros:</p> <p>Very simple to implement.
No need to implement getInstance() method. Instance can be accessed directly.
Cons:</p> <p>May lead to resource wastage. Because instance of class is created always, whether it is required or not.
CPU time is also wasted in creation of instance if it is not required.
Exception handling is not possible.</p> <h3 id="using-static-block"><a href="#using-static-block" aria-hidden="true" class="header-anchor">#</a> Using static block</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Java code to create singleton class </span>
<span class="token comment">// Using Static block </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span>  
<span class="token punctuation">{</span> 
  <span class="token comment">// public instance </span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> GFG instance<span class="token punctuation">;</span> 
  
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor </span>
  <span class="token punctuation">}</span> 
  
  <span class="token punctuation">{</span> 
    <span class="token comment">// static block to initialize instance </span>
    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Pros:</p> <p>Very simple to implement.
No need to implement getInstance() method. Instance can be accessed directly.
Exceptions can be handled in static block.
Cons:</p> <p>May lead to resource wastage. Because instance of class is created always, whether it is required or not.
CPU time is also wasted in creation of instance if it is not require</p> <h3 id="lazy-initialization"><a href="#lazy-initialization" aria-hidden="true" class="header-anchor">#</a> Lazy initialization</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//Java Code to create singleton class </span>
<span class="token comment">// With Lazy initialization </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span>  
<span class="token punctuation">{</span> 
  <span class="token comment">// private instance, so that it can be </span>
  <span class="token comment">// accessed by only by getInstance() method </span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> GFG instance<span class="token punctuation">;</span> 
  
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor </span>
  <span class="token punctuation">}</span> 
  
  <span class="token comment">//method to return instance of class </span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> GFG <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span> 
      <span class="token comment">// if instance is null, initialize </span>
      instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>Pros:</p> <p>Object is created only if it is needed. It may overcome resource overcome and wastage of CPU time.
Exception handling is also possible in method.
Cons:</p> <p>Every time a condition of null has to be checked.
instance can’t be accessed directly.
In multithreaded environment, it may break singleton property.</p> <h3 id="thread-safe-singleton"><a href="#thread-safe-singleton" aria-hidden="true" class="header-anchor">#</a> Thread Safe Singleton:</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Java program to create Thread Safe </span>
<span class="token comment">// Singleton class </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span>  
<span class="token punctuation">{</span> 
  <span class="token comment">// private instance, so that it can be </span>
  <span class="token comment">// accessed by only by getInstance() method </span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> GFG instance<span class="token punctuation">;</span> 
  
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor </span>
  <span class="token punctuation">}</span> 
  
 <span class="token comment">//synchronized method to control simultaneous access </span>
  <span class="token keyword">synchronized</span> <span class="token keyword">public</span> <span class="token keyword">static</span> GFG <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span> 
      <span class="token comment">// if instance is null, initialize </span>
      instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>Pros:</p> <p>Lazy initialization is possible.
It is also thread safe.
Cons:</p> <p>getInstance() method is synchronized so it causes slow performance as multiple threads can’t access it simultaneously.</p> <h3 id="lazy-initialization-with-double-check-locking"><a href="#lazy-initialization-with-double-check-locking" aria-hidden="true" class="header-anchor">#</a> Lazy initialization with Double check locking:</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Java code to explain double check locking </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span>  
<span class="token punctuation">{</span> 
  <span class="token comment">// private instance, so that it can be </span>
  <span class="token comment">// accessed by only by getInstance() method </span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> GFG instance<span class="token punctuation">;</span> 
  
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor </span>
  <span class="token punctuation">}</span> 
  
  <span class="token keyword">public</span> <span class="token keyword">static</span> GFG <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">{</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span> 
      <span class="token comment">//synchronized block to remove overhead </span>
      <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>GFG<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> 
      <span class="token punctuation">{</span> 
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance<span class="token operator">==</span>null<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span> 
          <span class="token comment">// if instance is null, initialize </span>
          instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
        
      <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>Pros:</p> <p>Lazy initialization is possible.
It is also thread safe.
Performance reduced because of synchronized keyword is overcome.
Cons:</p> <p>First time, it can affect performance.</p> <h2 id="bill-pugh-singleton-implementation"><a href="#bill-pugh-singleton-implementation" aria-hidden="true" class="header-anchor">#</a> Bill Pugh Singleton Implementation:</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Java code for Bill Pugh Singleton Implementaion </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GFG</span>  
<span class="token punctuation">{</span> 
  
  <span class="token keyword">private</span> <span class="token function">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token comment">// private constructor </span>
  <span class="token punctuation">}</span> 
  
  <span class="token comment">// Inner class to provide instance of class </span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">BillPughSingleton</span> 
  <span class="token punctuation">{</span> 
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> GFG INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
  
  <span class="token keyword">public</span> <span class="token keyword">static</span> GFG <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> BillPughSingleton<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="when-to-use-what"><a href="#when-to-use-what" aria-hidden="true" class="header-anchor">#</a> When to use What</h3> <ul><li>Eager initialization is easy to implement but it may cause resource and CPU time wastage. Use it only if cost of initializing a class is less in terms of resources or your program will always need the instance of class.</li> <li>By using Static block in Eager initialization we can provide exception handling and also can control over instance.</li> <li>Using synchronized we can create singleton class in multi-threading environment also but it can cause slow performance, so we can use Double check locking mechanism.</li> <li>Bill Pugh implementation is most widely used approach for singleton classes. Most developers prefer it because of its simplicity and advantages.</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/spring/singleton-scope.html" class="prev">
          Spring MVC 并发与线程安全
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/5.2e2f809b.js" defer></script><script src="/assets/js/app.ded2f491.js" defer></script>
  </body>
</html>
